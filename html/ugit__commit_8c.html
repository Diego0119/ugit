<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tarea 1 estructura de datos (UGIT): src/funciones/ugit_commit.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tarea 1 estructura de datos (UGIT)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_1599591245c09f3cec90ed7ad7cea609.html">funciones</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ugit_commit.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Permite realizar un commit para manejar el historial de versiones en el sistema de control de versiones.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="funciones_8h_source.html">../definicion_funciones/funciones.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1cb4a668c4533e67d4a9588f17a95f62" id="r_a1cb4a668c4533e67d4a9588f17a95f62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1cb4a668c4533e67d4a9588f17a95f62">ugit_commit</a> (char *prompt, char *branch_name, <a class="el" href="funciones_8h.html#a14904de83c569b98fe99d48f8ad552db">Branch</a> *branches, int *modificacion_flag)</td></tr>
<tr class="memdesc:a1cb4a668c4533e67d4a9588f17a95f62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza un commit para manejar el historial de versiones.  <br /></td></tr>
<tr class="separator:a1cb4a668c4533e67d4a9588f17a95f62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Permite realizar un commit para manejar el historial de versiones en el sistema de control de versiones. </p>
<p>Esta función realiza un commit en la rama actual del sistema de control de versiones. Un commit registra los cambios en el historial de versiones con un mensaje descriptivo. La función verifica que se hayan añadido archivos y que el mensaje de commit no esté vacío antes de proceder con el commit.</p>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-09-17 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1cb4a668c4533e67d4a9588f17a95f62" name="a1cb4a668c4533e67d4a9588f17a95f62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cb4a668c4533e67d4a9588f17a95f62">&#9670;&#160;</a></span>ugit_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ugit_commit </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>prompt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>branch_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="funciones_8h.html#a14904de83c569b98fe99d48f8ad552db">Branch</a> *</td>          <td class="paramname"><span class="paramname"><em>branches</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>modificacion_flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza un commit para manejar el historial de versiones. </p>
<p>Crea un nuevo commit.</p>
<p>La función <code>ugit_commit</code> agrega un nuevo commit al historial de versiones en la rama especificada. Verifica que se hayan añadido archivos y que el mensaje de commit no esté vacío antes de proceder. Si todo es correcto, se actualiza el historial de commits de la rama actual y se restablece la bandera de modificaciones.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prompt</td><td>Cadena de caracteres que contiene el mensaje del commit. El mensaje se extrae del comando <code>prompt</code>, comenzando desde el índice 11. </td></tr>
    <tr><td class="paramname">branch_name</td><td>Cadena de caracteres que representa el nombre de la rama en la que se realiza el commit. </td></tr>
    <tr><td class="paramname">branches</td><td>Estructura de datos que contiene todas las ramas y sus respectivos historiales de commits. La función actualiza el historial de commits de la rama especificada. </td></tr>
    <tr><td class="paramname">modificacion_flag</td><td>Bandera que indica si hay cambios no añadidos. La función verifica esta bandera para asegurarse de que todos los cambios se hayan añadido antes de realizar el commit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No retorna ningún valor.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="funciones_8h.html#a5bf5993921eb5ddfe7c322e3c163ab9d">ugit_commit</a>(<span class="keywordtype">char</span> *prompt, <span class="keywordtype">char</span> *branch_name, <a class="code hl_struct" href="structbranch.html">Branch</a> *branches, <span class="keywordtype">int</span> *modificacion_flag)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *commit_message = prompt + 11;</div>
<div class="line">    <span class="keywordtype">int</span> commit_count = branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_variable" href="structbranch.html#a1bf60f1c9b45286756f8b0723b3fb400">commit_count</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_struct" href="structcommit.html">commit</a>[commit_count].archivos_agregados, <span class="stringliteral">&quot;&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No se puede hacer un commit sin añadir archivos\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(commit_message, <span class="stringliteral">&quot;&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No se puede hacer un commit sin descripcion\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*modificacion_flag == 1)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Hay cambios que no se han añadido\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        strncpy(branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_struct" href="structcommit.html">commit</a>[commit_count].descripcion_commit, commit_message, <a class="code hl_define" href="funciones_8h.html#a479e2087967dffd589c1b8b65c8e65e6">MAX_INPUT_SIZE</a> - 1);</div>
<div class="line">        branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_variable" href="structbranch.html#a22691362767d3b8f966160af608a2ae2">commit</a>[commit_count].<a class="code hl_variable" href="structcommit.html#ad3770dc7fbf0647feb252563e865c47a">descripcion_commit</a>[<a class="code hl_define" href="funciones_8h.html#a479e2087967dffd589c1b8b65c8e65e6">MAX_INPUT_SIZE</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">        branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_variable" href="structbranch.html#a22691362767d3b8f966160af608a2ae2">commit</a>[commit_count].<a class="code hl_variable" href="structcommit.html#a001b1af1be04cab68e73d6a2845edd75">commit_hash</a> = <a class="code hl_function" href="funciones_8h.html#a52b35fafc1c97e7916d7ad5dbfc58730">generar_hash</a>(prompt);</div>
<div class="line">        branches[<a class="code hl_function" href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a>(branch_name)].<a class="code hl_variable" href="structbranch.html#a1bf60f1c9b45286756f8b0723b3fb400">commit_count</a>++;</div>
<div class="line">        *modificacion_flag = 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="afunciones_8h_html_a479e2087967dffd589c1b8b65c8e65e6"><div class="ttname"><a href="funciones_8h.html#a479e2087967dffd589c1b8b65c8e65e6">MAX_INPUT_SIZE</a></div><div class="ttdeci">#define MAX_INPUT_SIZE</div><div class="ttdoc">Tamaño máximo para entradas de texto.</div><div class="ttdef"><b>Definition</b> funciones.h:20</div></div>
<div class="ttc" id="afunciones_8h_html_a4fa4739a855fbdd94d39373374c4a23b"><div class="ttname"><a href="funciones_8h.html#a4fa4739a855fbdd94d39373374c4a23b">hash</a></div><div class="ttdeci">int hash(char *input)</div><div class="ttdoc">Calcula el hash de una cadena de caracteres.</div><div class="ttdef"><b>Definition</b> hash.c:60</div></div>
<div class="ttc" id="afunciones_8h_html_a52b35fafc1c97e7916d7ad5dbfc58730"><div class="ttname"><a href="funciones_8h.html#a52b35fafc1c97e7916d7ad5dbfc58730">generar_hash</a></div><div class="ttdeci">int generar_hash(char *prompt)</div><div class="ttdoc">Genera los hash de los commits.</div><div class="ttdef"><b>Definition</b> generar_hash.c:36</div></div>
<div class="ttc" id="afunciones_8h_html_a5bf5993921eb5ddfe7c322e3c163ab9d"><div class="ttname"><a href="funciones_8h.html#a5bf5993921eb5ddfe7c322e3c163ab9d">ugit_commit</a></div><div class="ttdeci">void ugit_commit(char *message, char *author, Branch *branch, int *commit_count)</div><div class="ttdoc">Crea un nuevo commit.</div><div class="ttdef"><b>Definition</b> ugit_commit.c:71</div></div>
<div class="ttc" id="astructbranch_html"><div class="ttname"><a href="structbranch.html">branch</a></div><div class="ttdoc">Estructura que representa una rama en uGit.</div><div class="ttdef"><b>Definition</b> funciones.h:51</div></div>
<div class="ttc" id="astructbranch_html_a1bf60f1c9b45286756f8b0723b3fb400"><div class="ttname"><a href="structbranch.html#a1bf60f1c9b45286756f8b0723b3fb400">branch::commit_count</a></div><div class="ttdeci">int commit_count</div><div class="ttdoc">Número de commits en la rama.</div><div class="ttdef"><b>Definition</b> funciones.h:54</div></div>
<div class="ttc" id="astructbranch_html_a22691362767d3b8f966160af608a2ae2"><div class="ttname"><a href="structbranch.html#a22691362767d3b8f966160af608a2ae2">branch::commit</a></div><div class="ttdeci">Commit commit[MAX_COMMITS]</div><div class="ttdoc">Lista de commits en la rama.</div><div class="ttdef"><b>Definition</b> funciones.h:53</div></div>
<div class="ttc" id="astructcommit_html"><div class="ttname"><a href="structcommit.html">commit</a></div><div class="ttdoc">Estructura que representa un commit en uGit.</div><div class="ttdef"><b>Definition</b> funciones.h:35</div></div>
<div class="ttc" id="astructcommit_html_a001b1af1be04cab68e73d6a2845edd75"><div class="ttname"><a href="structcommit.html#a001b1af1be04cab68e73d6a2845edd75">commit::commit_hash</a></div><div class="ttdeci">long commit_hash</div><div class="ttdoc">Hash único del commit.</div><div class="ttdef"><b>Definition</b> funciones.h:37</div></div>
<div class="ttc" id="astructcommit_html_ad3770dc7fbf0647feb252563e865c47a"><div class="ttname"><a href="structcommit.html#ad3770dc7fbf0647feb252563e865c47a">commit::descripcion_commit</a></div><div class="ttdeci">char descripcion_commit[MAX_INPUT_SIZE]</div><div class="ttdoc">Descripción del commit.</div><div class="ttdef"><b>Definition</b> funciones.h:36</div></div>
</div><!-- fragment --><p>La función realiza las siguientes operaciones:</p><ul>
<li>Extrae el mensaje del commit del comando <code>prompt</code> (comenzando en <code>prompt + 11</code>).</li>
<li>Verifica si hay archivos añadidos y si el mensaje del commit no está vacío.</li>
<li>Verifica si la bandera de modificaciones está activada (indicando que hay cambios no añadidos).</li>
<li>Si todas las condiciones son correctas, actualiza el historial de commits de la rama actual con el mensaje del commit y el hash generado para el commit.</li>
<li>Incrementa el contador de commits en la rama actual y restablece la bandera de modificaciones a 0.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Asegúrese de que el comando <code>prompt</code> esté correctamente formateado y contenga el mensaje del commit en la posición correcta (a partir de <code>prompt + 11</code>). </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
